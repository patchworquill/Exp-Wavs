<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Experimental Waves</title>
    <<style media="screen">
      body {margin: 0;}
      canvas {width: 100%; height:100%;}
    </style>
  </head>

  <body>
    <script src="js/three.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script src="js/ImprovedNoise.js"></script>
    <script type="text/javascript">
      var scene = new THREE.Scene( );
      scene.background = ({color: 0xFFFFFF});
      var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 ); // near clipping plane, far clipping plane

      var raycaster = new THREE.Raycaster();
			var mouse = new THREE.Vector2();

      var renderer = new THREE.WebGLRenderer( {antialias: true} );
      renderer.setPixelRatio( window.devicePixelRatio );
      renderer.setSize( window.innerWidth, window.innerHeight );
      document.body.appendChild( renderer.domElement );

      window.addEventListener( 'resize', function( )
      {
        var width = window.innerHeight;
        var height = window.innerHeight;
        renderer.setSize( width, height );

        camera.aspect = width / height;
        camera.updateProjectionMatrix( );
      } );

      controls = new THREE.OrbitControls( camera, renderer.domElement );
      //controls.autoRotate = true;
      //controls.autoRotateSpeed = 2.0; // default is 2
      //controls.minDistance = 1;
			//controls.maxDistance = 10;
			// controls.maxPolarAngle = Math.PI / 2;
      // controls.enableDamping = true;
      // controls.dampingFactor = 1.0;

      var ray = new THREE.Raycaster(  );
      var mouse = new THREE.Vector2( );

      function onMouseMove( event ) {

      	// calculate mouse position in normalized device coordinates
      	// (-1 to +1) for both components
      	mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
      	mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;

      }

      // var plane = new THREE.BoxGeometry (25, 25, 25);
      // var planeMaterial =
      // {
      //   new THREE.MeshLambertMaterial({ color: 0x630909, wireframe:true, emissive: 0x2194ce  }) // Right
      // };
      // var base = new THREE.Mesh( plane, planeMaterial );
      // scene.add( base );

      // // create the shape
      var geometry = new THREE.BoxGeometry( 1, 1, 1 );

      // create a material, colour or image texture
      var material = new THREE.MeshPhongMaterial( { color: 0x2194ce, wireframe: false, emissive: 0x630909} );
      var cube = new THREE.Mesh( geometry, material );
      scene.add( cube );

      // var fog = new THREE.Fog( "black", 0.1, 1);
      // scene.add( fog );

      var ambientBlue = new THREE.SpotLight( 0x0000FF, 5.0, 5, 90, 2, 1.0);
      var ambientRed = new THREE.SpotLight( 0xFF0000, 5.0, 5, 90, 2, 1.0);
      ambientBlue.position.set(0,3,0);
      ambientRed.position.set(0,1,0);
      //var ambientRed = new THREE.AmbientLight(0xFF0000, 0.8);
      scene.add( ambientBlue );
      scene.add( ambientRed );

      var pointlight1 = new THREE.DirectionalLight(0xFFFFFF, 0.8, 5, 0.1);
      scene.add( pointlight1 );

      camera.position.x = 3;
      camera.position.y = 3;
      camera.position.z = 1;

      // Create some noise to spice things up
      //noise = Three.SimplexNoise();


      // game logic
      var update = function()
      {
          var time = Date.now( ) * 0.0005;
          // pointlight1.position.x = Math.sin(( time * 0.01) * 30);
          // pointlight1.position.y = Math.cos(( time * 0.01) * 40);
          // pointlight1.position.z = Math.cos(( time * 0.01) * 30);

          ambientBlue.position.x = Math.sin(( time * 0.8 + 180) * 30);
          ambientBlue.position.y = Math.cos(( time * 0.5 + 180) * 40);
          ambientBlue.position.z = Math.sin(( time * 0.8 + 180) * 30);

          ambientRed.position.x = Math.cos(( time * 0.5 + 180) * 30);
          ambientRed.position.y = Math.sin(( time * 0.8 + 180) * 40);
          ambientRed.position.z = Math.cos(( time * 0.5 + 180) * 30);



          //cube.rotation.x += 0.01;
          //cube.rotation.y += 0.01;
      };

      // draw Scene
      var render = function( )
      {
        // raycaster.setFromCamera( mouse, camera );
        //
        // var intersects = raycaster.intersectObjects( scene.children );
        //
        // for (var i = 0; i < intersects.length; i++ ) {
        //   intersect[ i ].object.material.color.set( 0x00ffbb );
        // };

        renderer.render( scene, camera );
      };

      // run game loop (update, render, repeat)
      var GameLoop = function( )
      {
        requestAnimationFrame( GameLoop );

        update( );
        render( );
      };

      window.addEventListener( 'mousemove', onMouseMove, false );
      GameLoop( );
    </script>
  </body>
</html>
